<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="craft">


 <!--==================== 김진솔 시작 ====================== -->
<select id="craft_check_name" parameterType="String" resultType="int">
 	select count(*) from CRAFT where craft_name=#{craft_name}
</select>

 <!--==================== 김진솔 끝 ====================== -->




<!--==================== 김나윤 시작 ====================== -->
<select id="crafts_list_select" resultType="com.spring.gotgongbang.craft.model.CraftVO">
	SELECT *
	FROM CRAFT
</select>
<!--==================== 김나윤 끝 ====================== -->



<!--==================== 박준엽 시작 ====================== -->

<select id="getPartnerInfoByUserId" parameterType="String" resultType="com.spring.gotgongbang.craft.model.PartnerVO">
	select  partner_id_pk, partner_pwd, partner_name, partner_email, partner_mobile, partner_post_code, partner_address, partner_detail_address, partner_extra_address, to_char(partner_birthday, 'YYYY-MM-DD') AS partner_birthday
	from PARTNER
	where partner_id_pk = #{userid}
</select>

<update id="updatePartnerInfo" parameterType="com.spring.gotgongbang.craft.model.PartnerVO">
	UPDATE PARTNER SET partner_name = #{partner_name}, partner_email = #{partner_email}, partner_mobile = #{partner_mobile}, partner_post_code = #{partner_post_code}, partner_address = #{partner_address},
	partner_detail_address = #{partner_detail_address}, partner_extra_address = #{partner_extra_address}, partner_birthday = to_date(#{partner_birthday}, 'YYYY-MM-DD')
	WHERE partner_id_pk = #{partner_id_pk}
</update>

<update id="updatePartnerPwd" parameterType="com.spring.gotgongbang.craft.model.PartnerVO">
	UPDATE PARTNER SET partner_pwd = #{partner_pwd}
	WHERE partner_id_pk = #{partner_id_pk}
</update>

<select id="getAllOrders" parameterType="HashMap" resultType="com.spring.gotgongbang.order.model.OrderVO">
	select order_num_pk, user_id_fk, order_date, brand_name, requests
	from
	(
	select row_number() over(order by order_num_pk desc) as rno,
	order_num_pk, user_id_fk, to_char(order_date, 'yyyy-mm-dd') as order_date,
	brand_name, requests
	from orders
	) S
	where rno between #{startRno} and #{endRno}
</select>

<select id="getTotalCountForEstimate" resultType="int">
	select count(*)
	from ORDERS
</select>


<!--==================== 박준엽 끝 ====================== -->

</mapper>